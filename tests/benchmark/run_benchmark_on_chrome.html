<!--
  Copyright (C) 2023 Intel Corporation.  All rights reserved.
  SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception
-->

<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>run benchmark</title>
    <style>
        #resultTable {
            width: 60%;
            table-layout: fixed;
        }

        #resultTable th, #resultTable td {
            width: 33.33%;
            text-align: center;
        }
    </style>
  </head>
  <body>
    <table id="configTable">
        <tr>
        <td><label for="warmupTimes">warmup times:</label></td>
        <td><input type="text" id="warmupTimes"></td>
        </tr>
    </table>
    <p></p>

    <table id="resultTable" border="1">
        <thead>
            <tr>
                <th>benchmark</th>
                <th>wasm result(ms)</th>
                <th>js result(ms)</th>
                <th>wasm result / js result</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td id="any_basic_type_access">any_basic_type_access</td>
                <td id="any_basic_type_access_1">0</td>
                <td id="any_basic_type_access_2">0</td>
                <td id="any_basic_type_access_3">NAN</td>
            </tr>
            <!-- <tr>
                <td id="any_complex_type_access">any_complex_type_access</td>
                <td id="any_complex_type_access_1">0</td>
                <td id="any_complex_type_access_2">0</td>
                <td id="any_complex_type_access_3">NAN</td>
            </tr> -->
            <tr>
                <td id="array_access">array_access</td>
                <td id="array_access_1">0</td>
                <td id="array_access_2">0</td>
                <td id="array_access_3">NAN</td>
            </tr>
            <tr>
                <td id="array_access_i32">array_access_i32</td>
                <td id="array_access_i32_1">0</td>
                <td id="array_access_i32_2">0</td>
                <td id="array_access_i32_3">NAN</td>
            </tr>
            <tr>
                <td id="binarytrees_class">binarytrees_class</td>
                <td id="binarytrees_class_1">0</td>
                <td id="binarytrees_class_2">0</td>
                <td id="binarytrees_class_3">NAN</td>
            </tr>
            <!-- <tr>
                <td id="binarytrees_interface">binarytrees_interface</td>
                <td id="binarytrees_interface_1">0</td>
                <td id="binarytrees_interface_2">0</td>
                <td id="binarytrees_interface_3">NAN</td>
            </tr> -->
            <tr>
                <td id="class_access">class_access</td>
                <td id="class_access_1">0</td>
                <td id="class_access_2">0</td>
                <td id="class_access_3">NAN</td>
            </tr>
            <tr>
                <td id="class_allocation">class_allocation</td>
                <td id="class_allocation_1">0</td>
                <td id="class_allocation_2">0</td>
                <td id="class_allocation_3">NAN</td>
            </tr>
            <tr>
                <td id="fibonacci">fibonacci</td>
                <td id="fibonacci_1">0</td>
                <td id="fibonacci_2">0</td>
                <td id="fibonacci_3">NAN</td>
            </tr>
            <tr>
                <td id="interface_access_field_fastpath">interface_access_field_fastpath</td>
                <td id="interface_access_field_fastpath_1">0</td>
                <td id="interface_access_field_fastpath_2">0</td>
                <td id="interface_access_field_fastpath_3">NAN</td>
            </tr>
            <!-- <tr>
                <td id="interface_access_field_slowpath">interface_access_field_slowpath</td>
                <td id="interface_access_field_slowpath_1">0</td>
                <td id="interface_access_field_slowpath_2">0</td>
                <td id="interface_access_field_slowpath_3">NAN</td>
            </tr> -->
            <tr>
                <td id="interface_access_method_fastpath">interface_access_method_fastpath</td>
                <td id="interface_access_method_fastpath_1">0</td>
                <td id="interface_access_method_fastpath_2">0</td>
                <td id="interface_access_method_fastpath_3">NAN</td>
            </tr>
            <!-- <tr>
                <td id="interface_access_method_slowpath">interface_access_method_slowpath</td>
                <td id="interface_access_method_slowpath_1">0</td>
                <td id="interface_access_method_slowpath_2">0</td>
                <td id="interface_access_method_slowpath_3">NAN</td>
            </tr> -->
            <tr>
                <td id="mandelbrot">mandelbrot</td>
                <td id="mandelbrot_1">0</td>
                <td id="mandelbrot_2">0</td>
                <td id="mandelbrot_3">NAN</td>
            </tr>
            <tr>
                <td id="mandelbrot_i32">mandelbrot_i32</td>
                <td id="mandelbrot_i32_1">0</td>
                <td id="mandelbrot_i32_2">0</td>
                <td id="mandelbrot_i32_3">NAN</td>
            </tr>
            <!-- <tr>
                <td id="merkletrees">merkletrees</td>
                <td id="merkletrees_1">0</td>
                <td id="merkletrees_2">0</td>
                <td id="merkletrees_3">NAN</td>
            </tr> -->
            <tr>
                <td id="nbody_class">nbody_class</td>
                <td id="nbody_class_1">0</td>
                <td id="nbody_class_2">0</td>
                <td id="nbody_class_3">NAN</td>
            </tr>
            <tr>
                <td id="nbody_interface">nbody_interface</td>
                <td id="nbody_interface_1">0</td>
                <td id="nbody_interface_2">0</td>
                <td id="nbody_interface_3">NAN</td>
            </tr>
            <tr>
                <td id="quicksort">quicksort</td>
                <td id="quicksort_1">0</td>
                <td id="quicksort_2">0</td>
                <td id="quicksort_3">NAN</td>
            </tr>
            <tr>
                <td id="quicksort_float">quicksort_float</td>
                <td id="quicksort_float_1">0</td>
                <td id="quicksort_float_2">0</td>
                <td id="quicksort_float_3">NAN</td>
            </tr>
            <tr>
                <td id="spectral_norm">spectral_norm</td>
                <td id="spectral_norm_1">0</td>
                <td id="spectral_norm_2">0</td>
                <td id="spectral_norm_3">NAN</td>
            </tr>
            <tr>
                <td id="spectral_norm_i32">spectral_norm_i32</td>
                <td id="spectral_norm_i32_1">0</td>
                <td id="spectral_norm_i32_2">0</td>
                <td id="spectral_norm_i32_3">NAN</td>
            </tr>
        </tbody>
    </table>

    <script type="module">
        import { run_wasm_file } from "./run_benchmark_on_chrome.js";
        import { main as any_basic_type_access} from "./compile_output/any_basic_type_access.js"
        import { main as any_complex_type_access} from "./compile_output/any_complex_type_access.js"
        import { main as array_access} from "./compile_output/array_access.js"
        import { main as array_access_i32} from "./compile_output/array_access_i32.js"
        import { main as binarytrees_class} from "./compile_output/binarytrees_class.js"
        import { main as binarytrees_interface} from "./compile_output/binarytrees_interface.js"
        import { main as class_access} from "./compile_output/class_access.js"
        import { main as class_allocation} from "./compile_output/class_allocation.js"
        import { main as fibonacci} from "./compile_output/fibonacci.js"
        import { main as interface_access_field_fastpath} from "./compile_output/interface_access_field_fastpath.js"
        import { main as interface_access_field_slowpath} from "./compile_output/interface_access_field_slowpath.js"
        import { main as interface_access_method_fastpath} from "./compile_output/interface_access_method_fastpath.js"
        import { main as interface_access_method_slowpath} from "./compile_output/interface_access_method_slowpath.js"
        import { main as mandelbrot} from "./compile_output/mandelbrot.js"
        import { main as mandelbrot_i32} from "./compile_output/mandelbrot_i32.js"
        import { main as merkletrees} from "./compile_output/merkletrees.js"
        import { main as nbody_class} from "./compile_output/nbody_class.js"
        import { main as nbody_interface} from "./compile_output/nbody_interface.js"
        import { main as quicksort} from "./compile_output/quicksort.js"
        import { main as quicksort_float} from "./compile_output/quicksort_float.js"
        import { main as spectral_norm} from "./compile_output/spectral_norm.js"
        import { main as spectral_norm_i32} from "./compile_output/spectral_norm_i32.js"

        var warmupTimes= document.getElementById("warmupTimes").value;

        function any_basic_type_access_time() {
            const start_time = performance.now();
            any_basic_type_access();
            const end_time = performance.now();
            const run_time = end_time - start_time;
            const cell = document.getElementById(`any_basic_type_access_2`);
            cell.textContent = run_time.toFixed(2);
            return run_time;
        }
        function any_complex_type_access_time() {
            const start_time = performance.now();
            any_complex_type_access();
            const end_time = performance.now();
            const run_time = end_time - start_time;
            const cell = document.getElementById(`any_complex_type_access_2`);
            cell.textContent = run_time.toFixed(2);
            return run_time;
        }
        function array_access_time() {
            const start_time = performance.now();
            array_access();
            const end_time = performance.now();
            const run_time = end_time - start_time;
            const cell = document.getElementById(`array_access_2`);
            cell.textContent = run_time.toFixed(2);
            return run_time;
        }
        function array_access_i32_time() {
            const start_time = performance.now();
            array_access_i32();
            const end_time = performance.now();
            const run_time = end_time - start_time;
            const cell = document.getElementById(`array_access_i32_2`);
            cell.textContent = run_time.toFixed(2);
            return run_time;
        }
        function binarytrees_class_time() {
            const start_time = performance.now();
            binarytrees_class();
            const end_time = performance.now();
            const run_time = end_time - start_time;
            const cell = document.getElementById(`binarytrees_class_2`);
            cell.textContent = run_time.toFixed(2);
            return run_time;
        }
        function binarytrees_interface_time() {
            const start_time = performance.now();
            binarytrees_interface();
            const end_time = performance.now();
            const run_time = end_time - start_time;
            const cell = document.getElementById(`binarytrees_interface_2`);
            cell.textContent = run_time.toFixed(2);
            return run_time;
        }
        function class_access_time() {
            const start_time = performance.now();
            class_access();
            const end_time = performance.now();
            const run_time = end_time - start_time;
            const cell = document.getElementById(`class_access_2`);
            cell.textContent = run_time.toFixed(2);
            return run_time;
        }
        function class_allocation_time() {
            const start_time = performance.now();
            class_allocation();
            const end_time = performance.now();
            const run_time = end_time - start_time;
            const cell = document.getElementById(`class_allocation_2`);
            cell.textContent = run_time.toFixed(2);
            return run_time;
        }
        function fibonacci_time() {
            const start_time = performance.now();
            fibonacci();
            const end_time = performance.now();
            const run_time = end_time - start_time;
            const cell = document.getElementById(`fibonacci_2`);
            cell.textContent = run_time.toFixed(2);
            return run_time;
        }
        function interface_access_field_fastpath_time() {
            const start_time = performance.now();
            interface_access_field_fastpath();
            const end_time = performance.now();
            const run_time = end_time - start_time;
            const cell = document.getElementById(`interface_access_field_fastpath_2`);
            cell.textContent = run_time.toFixed(2);
            return run_time;
        }
        function interface_access_field_slowpath_time() {
            const start_time = performance.now();
            interface_access_field_slowpath();
            const end_time = performance.now();
            const run_time = end_time - start_time;
            const cell = document.getElementById(`interface_access_field_slowpath_2`);
            cell.textContent = run_time.toFixed(2);
            return run_time;
        }
        function interface_access_method_fastpath_time() {
            const start_time = performance.now();
            interface_access_method_fastpath();
            const end_time = performance.now();
            const run_time = end_time - start_time;
            const cell = document.getElementById(`interface_access_method_fastpath_2`);
            cell.textContent = run_time.toFixed(2);
            return run_time;
        }
        function interface_access_method_slowpath_time() {
            const start_time = performance.now();
            interface_access_method_slowpath();
            const end_time = performance.now();
            const run_time = end_time - start_time;
            const cell = document.getElementById(`interface_access_method_slowpath_2`);
            cell.textContent = run_time.toFixed(2);
            return run_time;
        }
        function mandelbrot_time() {
            const start_time = performance.now();
            mandelbrot();
            const end_time = performance.now();
            const run_time = end_time - start_time;
            const cell = document.getElementById(`mandelbrot_2`);
            cell.textContent = run_time.toFixed(2);
            return run_time;
        }
        function mandelbrot_i32_time() {
            const start_time = performance.now();
            mandelbrot_i32();
            const end_time = performance.now();
            const run_time = end_time - start_time;
            const cell = document.getElementById(`mandelbrot_i32_2`);
            cell.textContent = run_time.toFixed(2);
            return run_time;
        }
        function merkletrees_time() {
            const start_time = performance.now();
            merkletrees();
            const end_time = performance.now();
            const run_time = end_time - start_time;
            const cell = document.getElementById(`merkletrees_2`);
            cell.textContent = run_time.toFixed(2);
            return run_time;
        }
        function nbody_class_time() {
            const start_time = performance.now();
            nbody_class();
            const end_time = performance.now();
            const run_time = end_time - start_time;
            const cell = document.getElementById(`nbody_class_2`);
            cell.textContent = run_time.toFixed(2);
            return run_time;
        }
        function nbody_interface_time() {
            const start_time = performance.now();
            nbody_interface();
            const end_time = performance.now();
            const run_time = end_time - start_time;
            const cell = document.getElementById(`nbody_interface_2`);
            cell.textContent = run_time.toFixed(2);
            return run_time;
        }
        function quicksort_time() {
            const start_time = performance.now();
            quicksort();
            const end_time = performance.now();
            const run_time = end_time - start_time;
            const cell = document.getElementById(`quicksort_2`);
            cell.textContent = run_time.toFixed(2);
            return run_time;
        }
        function quicksort_float_time() {
            const start_time = performance.now();
            quicksort_float();
            const end_time = performance.now();
            const run_time = end_time - start_time;
            const cell = document.getElementById(`quicksort_float_2`);
            cell.textContent = run_time.toFixed(2);
            return run_time;
        }
        function spectral_norm_time() {
            const start_time = performance.now();
            spectral_norm();
            const end_time = performance.now();
            const run_time = end_time - start_time;
            const cell = document.getElementById(`spectral_norm_2`);
            cell.textContent = run_time.toFixed(2);
            return run_time;
        }
        function spectral_norm_i32_time() {
            const start_time = performance.now();
            spectral_norm_i32();
            const end_time = performance.now();
            const run_time = end_time - start_time;
            const cell = document.getElementById(`spectral_norm_i32_2`);
            cell.textContent = run_time.toFixed(2);
            return run_time;
        }

        /* update js run times */
        any_basic_type_access_time();
        // any_complex_type_access_time();
        array_access_time();
        array_access_i32_time();
        binarytrees_class_time();
        // binarytrees_interface_time();
        class_access_time();
        class_allocation_time();
        fibonacci_time();
        interface_access_field_fastpath_time();
        // interface_access_field_slowpath_time();
        interface_access_method_fastpath_time();
        // interface_access_method_slowpath_time();
        mandelbrot_time();
        mandelbrot_i32_time();
        // merkletrees_time();
        nbody_class_time();
        nbody_interface_time();
        quicksort_time();
        quicksort_float_time();
        spectral_norm_time();
        spectral_norm_i32_time();

        /* update wasm run times */
        run_wasm_file('any_basic_type_access', warmupTimes);
        // run_wasm_file('any_complex_type_access', warmupTimes);
        run_wasm_file('array_access', warmupTimes);
        run_wasm_file('array_access_i32', warmupTimes);
        run_wasm_file('binarytrees_class', warmupTimes);
        // run_wasm_file('binarytrees_interface', warmupTimes);
        run_wasm_file('class_access', warmupTimes);
        run_wasm_file('class_allocation', warmupTimes);
        run_wasm_file('fibonacci', warmupTimes);
        run_wasm_file('interface_access_field_fastpath', warmupTimes);
        // run_wasm_file('interface_access_field_slowpath', warmupTimes);
        run_wasm_file('interface_access_method_fastpath', warmupTimes);
        // run_wasm_file('interface_access_method_slowpath', warmupTimes);
        run_wasm_file('mandelbrot', warmupTimes);
        run_wasm_file('mandelbrot_i32', warmupTimes);
        // run_wasm_file('merkletrees', warmupTimes);
        run_wasm_file('nbody_class', warmupTimes);
        run_wasm_file('nbody_interface', warmupTimes);
        run_wasm_file('quicksort', warmupTimes);
        run_wasm_file('quicksort_float', warmupTimes);
        run_wasm_file('spectral_norm', warmupTimes);
        run_wasm_file('spectral_norm_i32', warmupTimes);

    </script>
  </body>
</html>